<!doctype html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
  <meta name="description" content="Windows 10/WSL2 환경에서 Ollama, PyTorch, KorBERT, ChromaDB, Tree-Sitter, LlamaIndex, FastAPI, Redis, Celery, Prometheus, DVC를 결합해 온프레미스 RAG 플랫폼을 구축하는 단계별 안내" />
  <meta name="google-site-verification" content="google9c3f444d05c1610b" />

  <script src="bg-stars.js" defer></script>
  <script>
    // Early theme boot to avoid FOUC
    try {
      const saved = localStorage.getItem('theme');
      const pref = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', saved || pref);
    } catch(e) {}
  </script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GSAP for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>

  <style>
    :root {
      --bg: #0b1020;
      --fg: #e7ecff;
      --fg-soft: #c6cdeb;
      --muted: #8b93a7;
      --accent: #58c4ff;
      --accent-2: #7cffb2;
      --fs-body: clamp(0.98rem, 0.92rem + 0.55vw, 1.05rem);
      --fs-small: clamp(0.82rem, 0.78rem + 0.3vw, 0.94rem);
      --fs-lead: clamp(1.05rem, 0.95rem + 1vw, 1.25rem);
      --fs-h1: clamp(2.2rem, 1.6rem + 3.1vw, 3.5rem);
      --fs-h2: clamp(1.65rem, 1.4rem + 1.6vw, 2.35rem);
      --fs-h3: clamp(1.3rem, 1.15rem + 0.9vw, 1.8rem);
    }
    :root[data-theme="light"] {
      --bg: #f7f9ff;
      --fg: #0b1020;
      --fg-soft: #293042;
      --muted: #4c5368;
      --accent: #3e86ff;
      --accent-2: #47e5a1;
    }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
      background: var(--bg);
      color: var(--fg);
      font-size: var(--fs-body);
      line-height: 1.72;
      letter-spacing: 0.01em;
      overflow-x: hidden;
    }
    p { margin-bottom: 0.85em; }
    p.lead { font-size: var(--fs-lead); }
    small, .text-sm { font-size: var(--fs-small); }
    h1, h2, h3, h4 { font-weight: 800; line-height: 1.2; margin-bottom: 0.6em; }
    h1 { font-size: var(--fs-h1); }
    h2 { font-size: var(--fs-h2); }
    h3 { font-size: var(--fs-h3); }
    header h1[class*="text-"] { font-size: var(--fs-h1); letter-spacing: -0.01em; }
    header h1 span.text-2xl { font-size: clamp(1.25rem, 1.1rem + 1vw, 1.85rem); }
    header h1 span.text-3xl { font-size: clamp(1.45rem, 1.2rem + 1.2vw, 2.1rem); }
    .type-cycle { font-size: var(--fs-small); line-height: 1.6; }
    .container-max { max-width: 1100px; }
    .text-muted { color: var(--muted); }
    .text-fg { color: var(--fg); }
    .text-soft { color: var(--fg-soft); }

    nav.topbar { position: sticky; top: 0; z-index: 40; backdrop-filter: blur(8px); }
    nav.topbar .bar {
      border: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    :root[data-theme="light"] nav.topbar .bar {
      border: 1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
    }

    #bg-stars { position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
    header, main, footer, nav { position: relative; z-index: 1; }

    .cursor { position: fixed; inset: 0 auto auto 0; transform: translate(-50%, -50%); width: 18px; height: 18px; border-radius: 9999px; background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent-2)); mix-blend-mode: screen; pointer-events: none; z-index: 50; opacity: .8; transition: width .2s ease, height .2s ease, opacity .2s ease; }
    .cursor.-lg { width: 42px; height: 42px; opacity: .55; }
    @media (prefers-reduced-motion: reduce) { .cursor { display: none; } }

    /* 모바일 최적화 */
    @media (max-width: 767px) {
      html { font-size: 16px; } /* iOS Safari에서 줌 방지 */
      body { padding: 0 1rem; letter-spacing: 0; }
      .container-max { max-width: 100%; }
      .container-max.mx-auto { padding-left: 0.5rem; padding-right: 0.5rem; }

      /* 헤더 크기 조정 */
      header { padding: 1.25rem 0 2.25rem; }
      header h1 { font-size: clamp(2.1rem, 1.9rem + 1.5vw, 2.8rem); line-height: 1.18; }

      /* 내비게이션 최적화 */
      .topbar { display: none; } /* 모바일에서는 간소화 */

      /* 섹션 패딩 조정 */
      section { padding: 2.25rem 0; }
      section h2 { margin-bottom: 1.25rem; }
      section p { line-height: 1.7; }

      /* 버튼 크기 확대 */
      a.rounded-full { padding: 0.85rem 1.6rem; font-size: 1.02rem; min-height: 46px; display: flex; align-items: center; justify-content: center; }

      /* 글래스 패널 조정 */
      .glass { padding: 1.4rem 1.1rem; border-radius: 1.4rem; backdrop-filter: blur(18px); }
      .glass h2 { font-size: clamp(1.45rem, 1.3rem + 0.8vw, 1.7rem); }
      .glass p { font-size: clamp(0.95rem, 0.92rem + 0.3vw, 1.05rem); }

      /* 코드 블록 조정 */
      pre { font-size: clamp(0.82rem, 0.78rem + 0.3vw, 0.9rem); padding: 1rem; border-radius: 1rem; }

      /* 그리드 조정 */
      .grid.md\:grid-cols-2 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.md\:grid-cols-3 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.lg\:grid-cols-2 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.lg\:grid-cols-[1.1fr,0.9fr] { grid-template-columns: 1fr; }

      /* 리스트 항목 간격 조정 */
      ol.space-y-6 > li, ul.space-y-3 > li { margin-bottom: 1.4rem; }

      /* 이미지 반응형 */
      img { max-width: 100%; height: auto; }

      /* 터치 쇠사례 버튼 */
      button, input, select, textarea { min-height: 46px; padding: 0.75rem; }

      /* 스크롤 팁 */
      .policy-content { max-height: 300px; }

      /* 백그라운드 스타 효과 감소 (성능) */
      #bg-stars { opacity: 0.5; }
    }

    /* 중간 크기 장치 */
    @media (min-width: 768px) and (max-width: 1023px) {
      .container-max { padding: 0 1.5rem; }
      header h1 { font-size: clamp(2.45rem, 2rem + 1vw, 3rem); }
      section { padding: 2.8rem 0; }
    }

    @media (min-width: 1024px) {
      .container-max { padding: 0 2rem; }
      section { padding: 3.5rem 0; }
      main p { max-width: 70ch; }
    }

    .brand .logo { filter: drop-shadow(0 4px 12px rgba(88,196,255,.35)); }
    .brand > span { display: none; }
    .brand svg[viewBox="0 0 64 64"] { display: none; }
    :root[data-theme="light"] .brand .logo { filter: drop-shadow(0 0 1px rgba(0,0,0,.35)) drop-shadow(0 0 8px rgba(0,0,0,.12)); }

    .hero-gradient { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)); border: 1px solid rgba(255,255,255,.08); backdrop-filter: blur(8px); }
    :root[data-theme="light"] .hero-gradient { background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,0)); border: 1px solid rgba(0,0,0,.06); }
    .type-cycle > .active { color: var(--accent); }

    .glass { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border: 1px solid rgba(255,255,255,.08); box-shadow: 0 20px 50px rgba(0,0,0,.35); }
    :root[data-theme="light"] .glass { background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01)); border: 1px solid rgba(0,0,0,.06); box-shadow: 0 10px 30px rgba(0,0,0,.08); }
    .tilt-card { transform-style: preserve-3d; will-change: transform; }
    .tilt-card .shine { position: absolute; inset: 0; border-radius: 1rem; pointer-events: none; background: radial-gradient(500px 200px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.18), transparent 60%); opacity: 0; transition: opacity .25s ease; }
    .tilt-card:hover .shine { opacity: 1; }

    .progress { position: fixed; top: 0; left: 0; height: 3px; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); z-index: 60; }

    .policy-content { max-height: 400px; overflow-y: auto; }

    .magnetic { will-change: transform; display: inline-flex; align-items: center; gap: .6rem; }

    #themeToggle.active { color: var(--accent); border-color: color-mix(in oklab, var(--accent) 40%, transparent); }
  </style>
</head>
<body class="antialiased leading-relaxed">
  <canvas id="bg-stars" aria-hidden="true"></canvas>
  <div class="progress" aria-hidden="true"></div>
  <div class="cursor" aria-hidden="true"></div>

  <nav class="topbar">
    <div class="container-max mx-auto px-6 pt-4">
      <div class="bar rounded-2xl px-5 py-3 flex items-center justify-between">
        <a href="#top" class="brand inline-flex items-center gap-3" aria-label="Ollama · Llama 3.1 가이드 홈">
          <svg class="wordmark h-7 sm:h-8" viewBox="0 0 260 40" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ollama Llama Guide">
            <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
            <defs>
              <linearGradient id="brandGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="var(--accent)"/>
                <stop offset="100%" stop-color="var(--accent-2)"/>
              </linearGradient>
              <filter id="softGlow" x="-20%" y="-50%" width="140%" height="200%" color-interpolation-filters="sRGB">
                <feGaussianBlur stdDeviation="1.2" result="blur"/>
                <feMerge>
                  <feMergeNode in="blur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <text x="16" y="27" font-size="22" font-weight="800" font-family="'Noto Sans KR','Malgun Gothic','Inter',system-ui,sans-serif" fill="url(#brandGrad)" filter="url(#softGlow)">Ollama · Llama 가이드</text>
          </svg>
          <svg width="36" height="36" viewBox="0 0 64 64" role="img" aria-hidden="true">
            <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
            <defs>
              <linearGradient id="gOO" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" style="stop-color: var(--accent)"/>
                <stop offset="100%" style="stop-color: var(--accent-2)"/>
              </linearGradient>
            </defs>
            <circle cx="24" cy="32" r="14" fill="none" stroke="url(#gOO)" stroke-width="4" opacity="0.95" />
            <circle cx="40" cy="32" r="14" fill="none" stroke="url(#gOO)" stroke-width="4" opacity="0.6" />
            <ellipse cx="32" cy="28" rx="26" ry="12" fill="none" stroke="url(#gOO)" stroke-width="1.6" opacity="0.55" />
            <circle cx="46" cy="22" r="2.5" fill="url(#gOO)" />
          </svg>
          <span class="hidden sm:inline text-sm font-semibold text-soft">Windows 10 내부 임베딩 구축</span>
        </a>
        <div class="hidden lg:flex items-center gap-2 text-muted text-sm font-medium">
          <a href="#overview" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">개요</a>
          <a href="#setup" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">Ollama 설치</a>
          <a href="#llama" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">Llama 3.1</a>
          <a href="#pipeline" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">임베딩 파이프라인</a>
          <a href="#optimization" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">최적화</a>
          <a href="#troubleshooting" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">문제 해결</a>
          <a href="#cases" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">적용 사례</a>
        </div>
        <div class="flex items-center gap-2">
          <button id="themeToggle" class="rounded-full px-3.5 py-2 text-sm font-semibold border border-white/20 hover:bg-white/5 transition text-muted" aria-label="별 수 증가 토글" title="별 밀도 1.5배 토글">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 3l1.6 3.8L17 8.5l-3.4 1.7L12 14l-1.6-3.8L7 8.5l3.4-1.7L12 3Z" fill="currentColor"/>
              <path d="M5 16l.9 2.2L8 19l-2.1 1L5 22l-.9-2L2 19l2.1-.8L5 16Z" fill="currentColor" opacity=".7"/>
              <path d="M19 15l1.2 2.7L23 19l-2.8 1.3L19 23l-1.2-2.7L15 19l2.8-1.3L19 15Z" fill="currentColor" opacity=".7"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <header id="top" class="relative">
    <div class="container-max mx-auto px-6 pt-12 pb-8 sm:pt-20 sm:pb-14 lg:pt-24">
      <div class="hero-gradient rounded-3xl p-8 sm:p-12 lg:p-16">
        <div class="flex flex-col items-center text-center gap-6">
          <span class="inline-flex items-center gap-2 text-sm text-muted">
            Windows 10 · 온프레미스 RAG · 엔터프라이즈 AI 오케스트레이션
          </span>
          <h1 class="text-4xl sm:text-6xl font-extrabold tracking-tight">
            <span class="block">Ollama · Llama 3.1 · PyTorch · KorBERT · ChromaDB · Tree-Sitter · LlamaIndex · FastAPI</span>
            <span class="block text-2xl sm:text-3xl mt-2 text-soft">Redis/memcached 캐싱 · Celery &amp; RabbitMQ/Redis · Prometheus &amp; Grafana 모니터링 · DVC 기반 데이터/모델 버전 관리</span>
          </h1>
          <p class="type-cycle text-base sm:text-lg text-muted">
            <span class="cycle-item active">온프레미스 LLM + KorBERT 하이브리드 RAG 아키텍처</span>
            <span class="cycle-item hidden">Tree-Sitter 문서 파싱과 ChromaDB 임베딩 동기화</span>
            <span class="cycle-item hidden">LlamaIndex + FastAPI 실시간 질의 파이프라인</span>
            <span class="cycle-item hidden">Celery 워커와 Redis 캐시 최적화 전략</span>
            <span class="cycle-item hidden">Prometheus·Grafana·DVC 기반 운영 거버넌스</span>
          </p>
          <div class="flex flex-wrap items-center justify-center gap-3 sm:gap-4 mt-2">
            <a href="#pipeline" class="magnetic rounded-full px-5 py-3 text-sm font-semibold text-black bg-white hover:opacity-90 transition">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="opacity-80"><path d="M4 8l8 5 8-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              파이프라인 바로 보기
            </a>
            <a href="mailto:younseok.oh@gmail.com" class="rounded-full px-5 py-3 text-sm font-semibold border border-white/20 hover:bg-white/5 transition text-fg">전문가 상담 문의</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="overview" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
        <div class="shine" aria-hidden="true"></div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-4">프로젝트 개요</h2>
        <p class="text-soft leading-7">
          Windows 10 또는 WSL2 환경에서 Ollama로 Llama 3.1을 구동하고, PyTorch 기반 KorBERT 임베딩을 학습하며, Tree-Sitter로 사내 코드·문서를 정규화해 ChromaDB에 적재하는 온프레미스 RAG 아키텍처를 설계합니다. LlamaIndex와 FastAPI가 검색과 추론을 조합해 실시간 응답 품질을 보장하고, 데이터셋과 모델 전파는 DVC로 추적합니다.
        </p>
        <p class="text-soft leading-7 mt-4">
          본 가이드는 환경 준비, 모델·임베딩 학습, 비동기 파이프라인, API 연동, 관제·운영까지 한 번에 정리합니다. Redis/memcached 캐시, Celery 워커 + RabbitMQ/Redis 브로커, Prometheus·Grafana 모니터링을 활용해 안정적인 서비스 운영과 반복 가능한 배포 전략을 제시합니다.
        </p>
      </div>
    </section>

    <section id="toc" class="container-max mx-auto px-6 py-6 sm:py-10 lg:py-12">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">로드맵</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">구축 여정 한눈에 보기</h2>
        <div class="grid md:grid-cols-2 gap-6 text-soft">
          <ul class="space-y-3 list-none pl-0">
            <li class="flex gap-3"><span class="text-accent text-xl">01</span><span>Windows 10/WSL2, GPU 드라이버, Python·Poetry 개발 환경 및 필수 CLI 점검</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">02</span><span>Ollama 설치와 Llama 3.1 풀링, KorBERT 가중치 다운로드 및 PyTorch 런타임 구성</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">03</span><span>Tree-Sitter 파서 구축, 사내 문서·코드 정제, DVC 기반 데이터셋 버전 관리</span></li>
          </ul>
          <ul class="space-y-3 list-none pl-0">
            <li class="flex gap-3"><span class="text-accent text-xl">04</span><span>ChromaDB 인덱스 설계와 LlamaIndex 그래프 구성, FastAPI 게이트웨이 연동</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">05</span><span>Celery 워커 풀 및 RabbitMQ/Redis 브로커 구성, Redis/memcached 캐시 정책 수립</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">06</span><span>Prometheus &amp; Grafana APM, 모델·데이터 모니터링, 배포 자동화와 운영 KPI 정립</span></li>
          </ul>
        </div>
      </div>
    </section>

    <section id="setup" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="grid lg:grid-cols-[1.1fr,0.9fr] gap-10 items-start">
        <article class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
          <div class="shine" aria-hidden="true"></div>
          <p class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 2</p>
          <h2 class="text-2xl sm:text-3xl font-bold mb-6">설치 및 환경 준비</h2>
          <ol class="space-y-6 text-soft">
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">기본 OS · GPU · Python 설정</h3>
              <p>Windows 10 22H2 이상 또는 동일 수준의 WSL2 배포판에서 Hyper-V/가상화와 WSL2 기능을 활성화합니다. NVIDIA GPU 사용 시 최신 스튜디오 드라이버와 CUDA 12.x, cuDNN을 설치하고, Python 3.10+와 Poetry(또는 pipx)로 프로젝트 전용 가상환경을 구성합니다.</p>
            </li>
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">Ollama · PyTorch · KorBERT 스택 구성</h3>
              <p>관리자 PowerShell에서 Ollama를 설치한 뒤 <code>ollama pull llama3.1:8b</code>로 베이스 모델을 내려받습니다. PyTorch는 GPU 사양에 맞는 휠을 설치하고, KorBERT 프리트레인 가중치를 다운로드해 <code>torchrun</code> 기반 파인튜닝 스크립트와 DVC 데이터 리모트를 연동합니다.</p>
            </li>
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">브로커 · 캐시 · 모니터링 배치</h3>
              <p>Celery 워커가 사용할 RabbitMQ 또는 Redis 브로커를 설치해 접근 계정과 vhost를 분리하고, Redis/memcached 캐시 서버를 구성해 세션·임베딩 데이터를 저장합니다. Prometheus 노드 익스포터와 Grafana를 함께 설치해 추론 메트릭과 시스템 지표를 수집합니다.</p>
            </li>
          </ol>
        </article>
        <aside class="glass rounded-2xl p-6 sm:p-8 space-y-5">
          <h3 class="text-xl font-semibold text-fg">빠른 체크리스트</h3>
          <ul class="space-y-3 text-soft text-sm">
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Windows Update, WSL2, 가상화(VT-x/AMD-V) 활성화 완료</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>CUDA/ROCm 및 GPU 드라이버 설치, <code>nvidia-smi</code> 정상 응답</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Python 3.10+, Poetry/pipx, 필수 패키지(<code>torch</code>, <code>dvc</code>, <code>llama-index</code>) 설치</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Redis 또는 memcached 캐시 서비스 포트 및 보안 설정</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>RabbitMQ/Redis 브로커 사용자 권한, Prometheus 익스포터 배포</span></li>
          </ul>
        </aside>
      </div>
    </section>

    <section id="llama" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
        <div class="shine" aria-hidden="true"></div>
        <p class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 3</p>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">설치 및 초기 설정</h2>
        <div class="grid md:grid-cols-3 gap-8 text-soft">
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">1. Ollama &amp; Llama 3.1 런타임</h3>
            <p><code>ollama serve</code>로 백그라운드 서비스를 기동하고, <code>ollama pull llama3.1:8b</code> 또는 사내 정책에 맞는 모델을 다운로드합니다. <code>OLLAMA_HOST</code>를 FastAPI 게이트웨이에서 접근 가능한 주소로 노출하고, <code>--keepalive</code> 설정으로 초기 응답 지연을 줄입니다.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">2. KorBERT 임베딩 · PyTorch 파이프라인</h3>
            <p>KorBERT 파인튜닝 스크립트를 PyTorch Lightning/Accelerate로 실행하고, Tree-Sitter가 생성한 청크 데이터를 DVC 스테이지로 관리합니다. 학습된 체크포인트는 <code>torch.jit</code> 또는 safetensors 형식으로 내보내 Celery 임베딩 워커에서 즉시 로드합니다.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">3. LlamaIndex · FastAPI · ChromaDB 연계</h3>
            <p>LlamaIndex 노드 그래프를 ChromaDB 벡터스토어와 KorBERT 임베딩에 연결하여 검색 정확도를 확보합니다. FastAPI에서는 의존성 주입 패턴으로 쿼리 엔진을 구성하고, Redis 캐시 키를 활용해 자주 조회되는 질의를 재사용하며 Celery 태스크로 배치 업데이트를 예약합니다.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="pipeline" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 4</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">내부 임베딩 파이프라인</h2>
        <div class="grid lg:grid-cols-2 gap-8">
          <div class="space-y-5 text-soft leading-7">
            <p><strong class="text-fg">문서 파싱 &amp; 임베딩 학습</strong> Tree-Sitter 파서를 통해 코드·문서를 토큰 단위로 정규화하고 KorBERT 토크나이저로 512 토큰 청크를 생성합니다. 생성된 데이터셋은 DVC 파이프라인 스테이지에 등록되어 버전별로 재현 가능한 PyTorch 학습을 보장합니다.</p>
            <p><strong class="text-fg">벡터 스토어 &amp; 쿼리 그래프</strong> KorBERT 임베딩 벡터는 ChromaDB 컬렉션에 저장하고, HNSW/IVF 파라미터를 업무 도메인에 맞춰 튜닝합니다. LlamaIndex는 KorBERT 벡터를 1차 검색으로, Ollama Llama 3.1을 생성 모델로 조합해 컨텍스트 기반 답변을 제공합니다.</p>
            <p><strong class="text-fg">비동기 파이프라인 &amp; 버전 관리</strong> Celery 워커는 Tree-Sitter 결과와 KorBERT 임베딩을 배치로 재생성하고, Redis/memcached 캐시는 자주 조회되는 질의를 저장합니다. 모든 데이터 변경 이력과 모델 체크포인트는 DVC 및 Git 태그로 관리해 배포와 롤백을 단순화합니다.</p>
          </div>
          <div class="glass rounded-2xl p-6 space-y-5">
            <h3 class="text-xl font-semibold text-fg">샘플 구성</h3>
            <div class="space-y-3 text-sm text-soft">
              <div>
                <div class="font-semibold text-fg mb-1">DVC 파이프라인</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>dvc stage add -n parse \
  -d data/raw -d scripts/tree_sitter.py \
  -o data/parsed
python scripts/tree_sitter.py</code></pre>
              </div>
              <div>
                <div class="font-semibold text-fg mb-1">Celery 임베딩 태스크</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>@celery.task(bind=True, retry_backoff=True)
def build_embedding(self, doc_id):
    text = fetch_document(doc_id)
    emb = korbert_encoder.encode(text)
    chroma.upsert(doc_id, emb)</code></pre>
              </div>
              <div>
                <div class="font-semibold text-fg mb-1">FastAPI + LlamaIndex</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>@app.post(&quot;/query&quot;)
async def query(payload: Query):
    cached = redis.get(payload.key)
    if cached:
        return cached
    answer = index.as_query_engine().query(payload.text)
    redis.setex(payload.key, 300, answer)
    return answer</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="optimization" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 5</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-8">성능 최적화 &amp; 운영 전략</h2>
        <div class="grid lg:grid-cols-2 gap-8 text-soft leading-7">
          <div class="space-y-5">
            <p><strong class="text-fg">성능 관측 &amp; 프로파일링</strong> Ollama, FastAPI, Celery, ChromaDB 인스턴스에 Prometheus 익스포터를 부착해 지연, 처리량, GPU 메모리, 큐 적체를 수집합니다. Grafana에서는 워크로드별 대시보드를 만들고 Alertmanager로 임계치 기반 알람을 설정합니다.</p>
            <p><strong class="text-fg">캐시 &amp; 세션 전략</strong> Redis/memcached는 질의 결과, 모델 메타데이터, 세션 토큰을 분리된 네임스페이스로 저장합니다. TTL, 버전 키, Bloom Filter를 활용해 캐시 오염을 방지하고, FastAPI 미들웨어에서 히트율을 측정해 정책을 고도화합니다.</p>
          </div>
          <div class="space-y-5">
            <p><strong class="text-fg">비동기 태스크 튜닝</strong> Celery 워커는 GPU/CPU 리소스에 맞춰 <code>--concurrency</code>와 <code>--prefetch-multiplier</code>를 조정하며, RabbitMQ/Redis 브로커의 QoS 설정으로 대기열 폭발을 방지합니다. 예약 태스크는 Beat 또는 Airflow 트리거와 연계해 야간 일괄 업데이트를 수행합니다.</p>
            <p><strong class="text-fg">모델 최적화 &amp; 배포</strong> KorBERT 임베딩 모델은 8-bit/FP16 혼합 정밀도와 TorchScript로 경량화하고, Llama 3.1은 Ollama <code>quantize</code> 옵션이나 GPU 샤딩으로 확장합니다. DVC 스테이지를 통해 학습→검증→배포를 자동화하고, Canary/Blue-Green 전략으로 서비스 중단 없이 롤아웃합니다.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="troubleshooting" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 6</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-8">문제 해결 및 주의사항</h2>
        <div class="grid md:grid-cols-3 gap-6">
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">🪟</div>
            <h3 class="text-lg font-semibold text-fg">사전 점검 미흡</h3>
            <p class="text-sm text-soft">Windows 버전이 낮거나 가상화가 비활성화되면 설치가 중단되고, 메모리·디스크 부족으로 모델 다운로드가 실패합니다. Windows 22H2 이상, BIOS/Hyper-V 가상화 활성화, 디스크 정리를 우선 수행하세요.</p>
          </article>
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">🧰</div>
            <h3 class="text-lg font-semibold text-fg">GPU·라이브러리 불일치</h3>
            <p class="text-sm text-soft">NVIDIA 드라이버와 CUDA 버전 불일치, <code>transformers</code> 패키지 구버전, 네트워크 끊김 등이 실행 오류를 유발합니다. <code>nvidia-smi</code>로 상태를 점검하고, CUDA·cuDNN·패키지를 최신으로 유지한 뒤 안정적인 네트워크 환경에서 재시도하세요.</p>
          </article>
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">⚠️</div>
            <h3 class="text-lg font-semibold text-fg">권한·운영 리스크</h3>
            <p class="text-sm text-soft">관리자 권한 부족, 모델 대비 시스템 자원 부족은 서비스 실패와 성능 저하를 유발합니다. 모든 설치·서비스 기동은 관리자 권한으로 수행하고, 작은 모델·양자화로 성능을 검증한 뒤 점진적으로 확장하세요.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="cases" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 7</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">적용 시나리오</h2>
        <div class="grid lg:grid-cols-2 gap-8 items-start">
          <div class="space-y-5 text-soft leading-7">
            <p><strong class="text-fg">사내 지식 허브</strong> KorBERT + ChromaDB 조합으로 규정, 매뉴얼, 티켓 로그를 임베딩하여 직원용 Q&amp;A 포털을 구축합니다. FastAPI는 권한 기반 라우팅을 제공하고 Redis 캐시로 반복 질의를 가속해 평균 응답 시간을 1초 이하로 유지합니다.</p>
            <p><strong class="text-fg">코드 거버넌스 자동화</strong> Tree-Sitter로 서비스별 저장소를 파싱하고 Celery 워커가 KorBERT 임베딩을 생성해 보안 감사 용어집과 비교합니다. 비정상 패턴은 RabbitMQ 이벤트로 전송되어 LlamaIndex를 통한 자연어 요약 리포트로 전달됩니다.</p>
            <p><strong class="text-fg">운영/모니터링 통합</strong> Prometheus·Grafana로 추론 지연, 큐 적체, GPU 활용률을 감시하고, DVC 스테이지 메타데이터를 연결해 모델 릴리스별 성능 변화를 한눈에 추적합니다. Celery Beat가 야간에 데이터를 재인덱싱해 안정적인 서비스 품질을 유지합니다.</p>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <img src="https://milvus.io/docs/v2.2.x/assets/architecture_diagram.png" alt="Milvus 벡터 데이터베이스 아키텍처" class="w-full h-full object-cover" />
          </div>
        </div>
      </div>
    </section>

    <section id="resources" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 text-center space-y-4">
        <h2 class="text-2xl sm:text-3xl font-bold">다음 단계</h2>
        <p class="text-soft leading-7">PoC를 끝냈다면, 모니터링 지표와 보안 요건을 정의하고 운영 자동화(배치 재임베딩, 지식 베이스 동기화)를 설계하세요. 필요한 경우 저희 컨설턴트가 Windows 10 기반의 로컬 AI 파이프라인 구축을 도와드립니다.</p>
        <a href="mailto:younseok.oh@gmail.com" class="magnetic inline-flex items-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-black bg-white hover:opacity-90 transition">전문 컨설턴트에게 문의하기</a>
      </div>
    </section>
  </main>

  <footer class="container-max mx-auto px-6 pb-12 text-center text-sm text-muted">
    &copy; 2025 OO Consulting · Windows 10 Ollama &amp; Llama 3.1 Guide.
  </footer>

  <button id="backToTop" aria-label="맨 위로" class="fixed bottom-5 right-5 rounded-full px-4 py-3 text-sm font-semibold text-black bg-white shadow-lg border border-white/20 opacity-0 pointer-events-none transition">Top</button>

  <script>
    const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
    const getCSSVar = (name) => getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    const hexToRgb = (hex) => {
      const h = hex.replace('#','').trim();
      if (/^[0-9a-fA-F]{3}$/.test(h)) {
        const r = parseInt(h[0]+h[0],16), g = parseInt(h[1]+h[1],16), b = parseInt(h[2]+h[2],16); return {r,g,b};
      }
      if (/^[0-9a-fA-F]{6}$/.test(h)) {
        return { r: parseInt(h.slice(0,2),16), g: parseInt(h.slice(2,4),16), b: parseInt(h.slice(4,6),16) };
      }
      return { r: 88, g: 196, b: 255 };
    };

    (function(){
      const btn = document.getElementById('themeToggle');
      window.starBoost = false;
      function ensureNight(){ document.documentElement.setAttribute('data-theme', 'dark'); try { localStorage.setItem('theme', 'dark'); } catch(e) {} }
      btn.addEventListener('click', () => {
        ensureNight();
        window.starBoost = !window.starBoost;
        btn.classList.toggle('active', window.starBoost);
        document.dispatchEvent(new CustomEvent('starboost', { detail: window.starBoost }));
      });
    })();

    (function() {
      const items = Array.from(document.querySelectorAll('.type-cycle .cycle-item'));
      if (!items.length) return;
      let i = 0; setInterval(() => { items.forEach(el => el.classList.add('hidden')); i = (i+1) % items.length; items[i].classList.remove('hidden'); }, 2200);
    })();

    (function(){
      const cursor = document.querySelector('.cursor');
      let x = 0, y = 0, tx = 0, ty = 0;
      function raf(){ x += (tx - x) * 0.18; y += (ty - y) * 0.18; cursor.style.transform = `translate(${x}px, ${y}px)`; requestAnimationFrame(raf); }
      window.addEventListener('pointermove', e => { tx = e.clientX; ty = e.clientY; }, { passive: true });
      raf();
      for (const m of document.querySelectorAll('.magnetic')){
        const strength = 18;
        m.addEventListener('pointermove', e => { const r = m.getBoundingClientRect(); const mx = e.clientX - r.left - r.width/2; const my = e.clientY - r.top - r.height/2; m.style.transform = `translate(${mx/strength}px, ${my/strength}px)`; cursor.classList.add('-lg'); });
        m.addEventListener('pointerleave', () => { m.style.transform = ''; cursor.classList.remove('-lg'); });
      }
    })();

    (function(){
      const cards = document.querySelectorAll('.tilt-card');
      cards.forEach(card => {
        const max = 8;
        card.addEventListener('pointermove', e => { const r = card.getBoundingClientRect(); const px = (e.clientX - r.left) / r.width; const py = (e.clientY - r.top) / r.height; const rx = (py - .5) * -max; const ry = (px - .5) * max; card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`; card.style.setProperty('--mx', `${px*100}%`); card.style.setProperty('--my', `${py*100}%`); });
        card.addEventListener('pointerleave', () => { card.style.transform = ''; });
      });
    })();

    (function(){
      const bar = document.querySelector('.progress');
      const btn = document.getElementById('backToTop');
      function onScroll(){ const s = window.scrollY; const h = document.body.scrollHeight - innerHeight; const p = clamp(h > 0 ? s/h : 0, 0, 1); bar.style.width = `${p*100}%`; if (s > innerHeight * 0.6) { btn.style.opacity = '1'; btn.style.pointerEvents = 'auto'; } else { btn.style.opacity = '0'; btn.style.pointerEvents = 'none'; } }
      window.addEventListener('scroll', onScroll, { passive: true }); onScroll();
      btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();

    window.addEventListener('load', () => {
      if (!window.gsap) return; const { gsap } = window; if (window.ScrollTrigger) gsap.registerPlugin(ScrollTrigger);
      gsap.from('header .hero-gradient', { y: 20, autoAlpha: 0, duration: 0.8, ease: 'power2.out' });
      gsap.utils.toArray('.tilt-card').forEach((el, i) => { gsap.from(el, { y: 30, autoAlpha: 0, duration: 0.7, ease: 'power2.out', delay: i*0.05, scrollTrigger: { trigger: el, start: 'top 85%' } }); });
    });

    document.addEventListener('DOMContentLoaded', () => {
      try {
        const el = document.querySelector('header h1 .block');
        if (!el) return;
        const raw = (el.textContent || '').trim();
        const open = raw.indexOf('(');
        const close = raw.indexOf(')');
        if (open === 0 && close > open) {
          const prefix = raw.slice(0, close + 1);
          const rest = raw.slice(close + 1);
          el.innerHTML = `<span style="font-size:0.5em; vertical-align:baseline;">${prefix}</span><span class="ml-1 align-baseline">${rest}</span>`;
        }
      } catch(e) {}
    });
  </script>
</body>
</html>
