<!doctype html>
<html lang="ko" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
  <meta name="description" content="Windows 10/WSL2 환경에서 Ollama, PyTorch, KorBERT, ChromaDB, Tree-Sitter, LlamaIndex, FastAPI, Redis, Celery, Prometheus, DVC를 결합해 온프레미스 RAG 플랫폼을 구축하는 단계별 안내" />
  <meta name="google-site-verification" content="google9c3f444d05c1610b" />

  <script src="bg-stars.js" defer></script>
  <script>
    (function() {
      const componentData = {
        "A": {
          title: "Web App (사용자)",
          role: "사용자 인터페이스",
          tech: "전자정부프레임워크, JSP/Servlet, HTML/CSS/JS",
          description: "일반 사용자가 내일채움공제 업무를 처리하는 웹 화면입니다. 사용자가 특정 메뉴나 입력 필드에서 도움을 요청하면, 해당 메뉴 ID와 질문을 RAG 시스템으로 전송합니다."
        },
        "C": {
          title: "개발 운영자 (소스 질의)",
          role: "기술 질의 인터페이스",
          tech: "내부 관리 시스템, IDE 연동",
          description: "개발자나 운영자가 시스템 유지보수 중 발생하는 기술적인 질문이나 소스코드 관련 문의를 하는 인터페이스입니다. 분석이 필요한 파일 ID나 코드 조각을 RAG 시스템으로 보냅니다."
        },
        "B": {
          title: "FastAPI RAG Gateway",
          role: "API 게이트웨이",
          tech: "Python, FastAPI",
          description: "JAVA 기반 클라이언트와 Python 기반 RAG 시스템을 잇는 관문입니다. 요청을 수신하고 캐시·파이프라인·LLM 호출을 조합해 최종 결과를 JSON으로 응답합니다."
        },
        "D": {
          title: "Redis Cache",
          role: "캐싱 엔진",
          tech: "Redis",
          description: "자주 묻는 질문과 LLM 응답을 메모리에 저장해 반복 요청을 빠르게 처리합니다. TTL과 네임스페이스 정책으로 캐시 오염을 방지하며 서버 부하를 줄입니다."
        },
        "E": {
          title: "LlamaIndex Orchestrator",
          role: "RAG 파이프라인 관리",
          tech: "Python, LlamaIndex",
          description: "질문을 입력받아 벡터 검색, 프롬프트 구성, 후처리를 조율합니다. KorBERT 임베딩과 Llama 3.1 생성 모델을 결합해 고품질 답변을 생성합니다."
        },
        "F": {
          title: "ChromaDB Vector Store",
          role: "벡터 데이터베이스",
          tech: "ChromaDB",
          description: "매뉴얼과 소스코드를 임베딩 벡터로 저장하는 장기 기억 장치입니다. 의미 기반 유사도 검색을 제공하여 LlamaIndex가 빠르게 적합한 문맥을 확보하도록 돕습니다."
        },
        "G": {
          title: "Ollama · Llama 3.1",
          role: "대규모 언어 모델 (LLM)",
          tech: "Ollama, Llama 3.1",
          description: "ChromaDB에서 반환된 문맥과 사용자의 질문을 기반으로 자연스러운 답변을 생성합니다. 로컬 GPU 자원을 활용하며, 양자화·LoRA 등 최적화 옵션을 지원합니다."
        },
        "H1": {
          title: "매뉴얼 / 코드 원본",
          role: "원본 데이터",
          tech: "PDF, Word, Java, SQL 파일",
          description: "AI가 학습하고 참조하는 모든 지식의 원천입니다. 사용자·관리자 매뉴얼, 시스템 전체 소스코드, DB 스키마 등 실제 운영 데이터를 포함합니다."
        },
        "J": {
          title: "원본 데이터 리포지토리",
          role: "데이터 버전 관리",
          tech: "DVC, Git",
          description: "문서와 코드의 변경 이력을 관리합니다. 모델 성능 변화 시 학습 데이터 버전을 추적하고, 필요할 경우 특정 버전으로 롤백하는 근거를 제공합니다."
        },
        "H2": {
          title: "Tree-Sitter / Parser",
          role: "소스코드 구조 분석",
          tech: "Tree-Sitter",
          description: "Java, SQL 등 소스코드를 문법 구조 단위로 파싱하고 청크화합니다. 코드 전용 질문의 정확도를 높이고, 임베딩 품질을 일정하게 유지합니다."
        },
        "I": {
          title: "KorBERT Embedding Model",
          role: "임베딩 모델",
          tech: "KorBERT, PyTorch",
          description: "한국어 텍스트를 컴퓨터가 이해할 수 있는 벡터로 변환합니다. RAG 검색 정확도를 결정하는 핵심 요소로, Celery 워커에서 배치 임베딩을 수행합니다."
        }
      };

      const flowSequence = ["A", "B", "D", "E", "F", "G"];

      document.addEventListener("DOMContentLoaded", () => {
        const nav = document.getElementById("component-nav");
        const diagram = document.getElementById("architecture-svg");
        const infoPanel = document.getElementById("info-panel");
        const infoTitle = document.getElementById("info-title");
        const infoContent = document.getElementById("info-content");
        const simulateBtn = document.getElementById("simulate-btn");

        if (!nav || !diagram || !infoPanel || !infoTitle || !infoContent || !simulateBtn) {
          return;
        }

        const components = Array.from(diagram.querySelectorAll(".rag-component"));
        if (!components.length) return;

        let navItems = [];

        const fragment = document.createDocumentFragment();
        Object.entries(componentData).forEach(([id, data]) => {
          const navItem = document.createElement("a");
          navItem.href = "#architecture";
          navItem.dataset.id = id;
          navItem.textContent = data.title;
          navItem.className = "transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 px-2 py-1 rounded-lg block";
          navItem.style.fontFamily = "'Noto Sans KR', sans-serif";
          navItem.style.fontSize = "14px";
          fragment.appendChild(navItem);
        });
        nav.appendChild(fragment);
        navItems = Array.from(nav.querySelectorAll("a[data-id]"));

        const clearHighlights = () => {
          components.forEach(el => {
            el.classList.remove("highlight");
            const rect = el.querySelector("rect");
            if (rect) {
              rect.style.filter = rect.style.filter.replace(" url(#glow)", "");
            }
          });
          // Clear flow arrows
          const flowArrows = diagram.querySelectorAll(".flow-arrow");
          flowArrows.forEach(arrow => {
            arrow.style.opacity = "0";
          });
        };

        const updateInfoPanel = (id) => {
          const data = componentData[id];
          if (!data) return;
          infoTitle.innerHTML = `<span class="text-2xl mr-2">⚡</span>${data.title}`;
          infoContent.innerHTML = `
            <p><strong class="font-bold text-blue-600 dark:text-blue-400">역할:</strong> ${data.role}</p>
            <p><strong class="font-bold text-green-600 dark:text-green-400">주요 기술:</strong> ${data.tech}</p>
            <p class="mt-4 pt-4 border-t border-slate-200/70 dark:border-slate-700/60 leading-relaxed">${data.description}</p>
          `;
          components.forEach(el => {
            el.classList.toggle("selected", el.dataset.id === id);
            const rect = el.querySelector("rect");
            if (rect) {
              if (el.dataset.id === id) {
                rect.style.strokeWidth = "3";
                rect.style.filter = "url(#glow)";
              } else {
                rect.style.strokeWidth = rect.classList.contains("component-rect") ? "2" : "1";
                rect.style.filter = rect.style.filter.replace(" url(#glow)", "");
              }
            }
          });
          navItems.forEach(item => {
            item.classList.toggle("active", item.dataset.id === id);
            item.classList.toggle("bg-blue-100", item.dataset.id === id);
            item.classList.toggle("dark:bg-blue-800", item.dataset.id === id);
            item.classList.toggle("font-bold", item.dataset.id === id);
          });
        };

        const scrollInfoIntoView = () => {
          if (window.matchMedia("(max-width: 1023px)").matches) {
            infoPanel.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        };

        const selectComponent = (id, { scroll = true } = {}) => {
          updateInfoPanel(id);
          if (scroll) scrollInfoIntoView();
        };

        diagram.addEventListener("click", (event) => {
          const target = event.target.closest(".rag-component");
          if (!target || !target.dataset.id) return;
          if (isSimulating) stopSimulation();
          clearHighlights();
          selectComponent(target.dataset.id);
        });

        nav.addEventListener("click", (event) => {
          event.preventDefault();
          const target = event.target.closest("a[data-id]");
          if (!target) return;
          if (isSimulating) stopSimulation();
          clearHighlights();
          selectComponent(target.dataset.id);
        });

        let isSimulating = false;
        let timer = null;

        const setSimulateButtonState = (running) => {
          simulateBtn.textContent = running ? "⏹️ 시뮬레이션 중지" : "🚀 데이터 흐름 시뮬레이션 시작";
          simulateBtn.classList.toggle("bg-gradient-to-r", !running);
          simulateBtn.classList.toggle("from-blue-600", !running);
          simulateBtn.classList.toggle("to-blue-700", !running);
          simulateBtn.classList.toggle("hover:from-blue-700", !running);
          simulateBtn.classList.toggle("hover:to-blue-800", !running);
          simulateBtn.classList.toggle("bg-gradient-to-r", running);
          simulateBtn.classList.toggle("from-red-600", running);
          simulateBtn.classList.toggle("to-red-700", running);
          simulateBtn.classList.toggle("hover:from-red-700", running);
          simulateBtn.classList.toggle("hover:to-red-800", running);
          simulateBtn.classList.toggle("stop", running);
        };

        const stopSimulation = () => {
          if (timer) {
            clearTimeout(timer);
            timer = null;
          }
          isSimulating = false;
          clearHighlights();
          setSimulateButtonState(false);
        };

        simulateBtn.addEventListener("click", () => {
          if (isSimulating) {
            stopSimulation();
            return;
          }
          if (!flowSequence.length) return;

          isSimulating = true;
          let step = 0;
          setSimulateButtonState(true);

          const runStep = () => {
            if (step >= flowSequence.length) {
              stopSimulation();
              return;
            }
            const currentId = flowSequence[step];
            clearHighlights();

            // Highlight current component
            const el = diagram.querySelector(`.rag-component[data-id="${currentId}"]`);
            if (el) {
              const rect = el.querySelector("rect");
              if (rect) {
                rect.style.filter = "url(#glow)";
              }
              el.classList.add("highlight");

              // Show flow arrow for current step
              if (step < flowSequence.length - 1) {
                const flowArrow = diagram.querySelector(`#flow-path-${step + 1}`);
                if (flowArrow) {
                  flowArrow.style.opacity = "1";
                  // Animate arrow
                  flowArrow.style.strokeDasharray = "10,5";
                  flowArrow.style.animation = "flowAnimate 1.5s linear infinite";
                }
              }

              selectComponent(currentId, { scroll: false });
            }
            step += 1;
            timer = setTimeout(runStep, 2000);
          };

          runStep();
        });

        // Add CSS animation for flow arrows
        const style = document.createElement("style");
        style.textContent = `
          @keyframes flowAnimate {
            to {
              stroke-dashoffset: -15;
            }
          }
        `;
        document.head.appendChild(style);

        // Initialize with component A
        selectComponent("A", { scroll: false });
      });
    })();
  </script>

  <script>
    // Early theme boot to avoid FOUC
    try {
      const saved = localStorage.getItem('theme');
      const pref = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', saved || pref);
    } catch(e) {}
  </script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GSAP for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>

  <style>
    :root {
      --bg: #0b1020;
      --fg: #e7ecff;
      --fg-soft: #c6cdeb;
      --muted: #8b93a7;
      --accent: #58c4ff;
      --accent-2: #7cffb2;
      --fs-body: clamp(0.98rem, 0.92rem + 0.55vw, 1.05rem);
      --fs-small: clamp(0.82rem, 0.78rem + 0.3vw, 0.94rem);
      --fs-lead: clamp(1.05rem, 0.95rem + 1vw, 1.25rem);
      --fs-h1: clamp(2.2rem, 1.6rem + 3.1vw, 3.5rem);
      --fs-h2: clamp(1.65rem, 1.4rem + 1.6vw, 2.35rem);
      --fs-h3: clamp(1.3rem, 1.15rem + 0.9vw, 1.8rem);
    }
    :root[data-theme="light"] {
      --bg: #f7f9ff;
      --fg: #0b1020;
      --fg-soft: #293042;
      --muted: #4c5368;
      --accent: #3e86ff;
      --accent-2: #47e5a1;
    }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
      background: var(--bg);
      color: var(--fg);
      font-size: var(--fs-body);
      line-height: 1.72;
      letter-spacing: 0.01em;
      overflow-x: hidden;
    }
    p { margin-bottom: 0.85em; }
    p.lead { font-size: var(--fs-lead); }
    small, .text-sm { font-size: var(--fs-small); }
    h1, h2, h3, h4 { font-weight: 800; line-height: 1.2; margin-bottom: 0.6em; }
    h1 { font-size: var(--fs-h1); }
    h2 { font-size: var(--fs-h2); }
    h3 { font-size: var(--fs-h3); }
    header h1[class*="text-"] { font-size: var(--fs-h1); letter-spacing: -0.01em; }
    header h1 span.text-2xl { font-size: clamp(1.25rem, 1.1rem + 1vw, 1.85rem); }
    header h1 span.text-3xl { font-size: clamp(1.45rem, 1.2rem + 1.2vw, 2.1rem); }
    .type-cycle { font-size: var(--fs-small); line-height: 1.6; }
    .container-max { max-width: 1100px; }
    .text-muted { color: var(--muted); }
    .text-fg { color: var(--fg); }
    .text-soft { color: var(--fg-soft); }

    nav.topbar { position: sticky; top: 0; z-index: 40; backdrop-filter: blur(8px); }
    nav.topbar .bar {
      border: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    :root[data-theme="light"] nav.topbar .bar {
      border: 1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
    }

    #bg-stars { position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
    header, main, footer, nav { position: relative; z-index: 1; }

    .cursor { position: fixed; inset: 0 auto auto 0; transform: translate(-50%, -50%); width: 18px; height: 18px; border-radius: 9999px; background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent-2)); mix-blend-mode: screen; pointer-events: none; z-index: 50; opacity: .8; transition: width .2s ease, height .2s ease, opacity .2s ease; }
    .cursor.-lg { width: 42px; height: 42px; opacity: .55; }
    @media (prefers-reduced-motion: reduce) { .cursor { display: none; } }

    /* 모바일 최적화 */
    @media (max-width: 767px) {
      html { font-size: 16px; } /* iOS Safari에서 줌 방지 */
      body { padding: 0 1rem; letter-spacing: 0; }
      .container-max { max-width: 100%; }
      .container-max.mx-auto { padding-left: 0.5rem; padding-right: 0.5rem; }

      /* 헤더 크기 조정 */
      header { padding: 1.25rem 0 2.25rem; }
      header h1 { font-size: clamp(2.1rem, 1.9rem + 1.5vw, 2.8rem); line-height: 1.18; }

      /* 내비게이션 최적화 */
      .topbar { display: none; } /* 모바일에서는 간소화 */

      /* 섹션 패딩 조정 */
      section { padding: 2.25rem 0; }
      section h2 { margin-bottom: 1.25rem; }
      section p { line-height: 1.7; }

      /* 버튼 크기 확대 */
      a.rounded-full { padding: 0.85rem 1.6rem; font-size: 1.02rem; min-height: 46px; display: flex; align-items: center; justify-content: center; }

      /* 글래스 패널 조정 */
      .glass { padding: 1.4rem 1.1rem; border-radius: 1.4rem; backdrop-filter: blur(18px); }
      .glass h2 { font-size: clamp(1.45rem, 1.3rem + 0.8vw, 1.7rem); }
      .glass p { font-size: clamp(0.95rem, 0.92rem + 0.3vw, 1.05rem); }

      /* 코드 블록 조정 */
      pre { font-size: clamp(0.82rem, 0.78rem + 0.3vw, 0.9rem); padding: 1rem; border-radius: 1rem; }

      /* 그리드 조정 */
      .grid.md\:grid-cols-2 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.md\:grid-cols-3 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.lg\:grid-cols-2 { grid-template-columns: 1fr; gap: 1.5rem; }
      .grid.lg\:grid-cols-[1.1fr,0.9fr] { grid-template-columns: 1fr; }

      /* 리스트 항목 간격 조정 */
      ol.space-y-6 > li, ul.space-y-3 > li { margin-bottom: 1.4rem; }

      /* 이미지 반응형 */
      img { max-width: 100%; height: auto; }

      /* 터치 쇠사례 버튼 */
      button, input, select, textarea { min-height: 46px; padding: 0.75rem; }

      /* 스크롤 팁 */
      .policy-content { max-height: 300px; }

      /* 백그라운드 스타 효과 감소 (성능) */
      #bg-stars { opacity: 0.5; }
    }

    /* 중간 크기 장치 */
    @media (min-width: 768px) and (max-width: 1023px) {
      .container-max { padding: 0 1.5rem; }
      header h1 { font-size: clamp(2.45rem, 2rem + 1vw, 3rem); }
      section { padding: 2.8rem 0; }
    }

    @media (min-width: 1024px) {
      .container-max { padding: 0 2rem; }
      section { padding: 3.5rem 0; }
      main p { max-width: 70ch; }
    }

    .brand .logo { filter: drop-shadow(0 4px 12px rgba(88,196,255,.35)); }
    .brand > span { display: none; }
    .brand svg[viewBox="0 0 64 64"] { display: none; }
    :root[data-theme="light"] .brand .logo { filter: drop-shadow(0 0 1px rgba(0,0,0,.35)) drop-shadow(0 0 8px rgba(0,0,0,.12)); }

    .hero-gradient { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)); border: 1px solid rgba(255,255,255,.08); backdrop-filter: blur(8px); }
    :root[data-theme="light"] .hero-gradient { background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,0)); border: 1px solid rgba(0,0,0,.06); }
    .type-cycle > .active { color: var(--accent); }

    .glass { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border: 1px solid rgba(255,255,255,.08); box-shadow: 0 20px 50px rgba(0,0,0,.35); }
    :root[data-theme="light"] .glass { background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01)); border: 1px solid rgba(0,0,0,.06); box-shadow: 0 10px 30px rgba(0,0,0,.08); }
    .tilt-card { transform-style: preserve-3d; will-change: transform; }
    .tilt-card .shine { position: absolute; inset: 0; border-radius: 1rem; pointer-events: none; background: radial-gradient(500px 200px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.18), transparent 60%); opacity: 0; transition: opacity .25s ease; }
    .tilt-card:hover .shine { opacity: 1; }

    .progress { position: fixed; top: 0; left: 0; height: 3px; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); z-index: 60; }

    .policy-content { max-height: 400px; overflow-y: auto; }

    .magnetic { will-change: transform; display: inline-flex; align-items: center; gap: .6rem; }

    .architecture-explorer { position: relative; overflow: hidden; }
    .architecture-explorer .rag-tier { border: 2px dashed rgba(148,163,184,0.35); border-radius: 1.25rem; padding: clamp(1.5rem, 3vw, 2.6rem); background: rgba(255,255,255,0.78); backdrop-filter: blur(6px); }
    .architecture-explorer .rag-tier + .rag-tier { margin-top: clamp(1.5rem, 2.3vw, 2.8rem); }
    .architecture-explorer .rag-tier-title { text-align: center; font-size: 0.95rem; letter-spacing: 0.08em; text-transform: uppercase; color: #475569; margin-bottom: 1.1rem; font-weight: 600; }
    .architecture-explorer .rag-component { border: 2px solid rgba(30,64,175,0.15); border-radius: 1rem; padding: 1rem 1.25rem; text-align: center; font-weight: 600; transition: transform .25s ease, box-shadow .25s ease, background-color .25s ease, color .25s ease; cursor: pointer; min-width: 10.5rem; background: rgba(241,245,249,0.8); color: #1e293b; box-shadow: 0 6px 16px rgba(15,23,42,0.06); }
    .architecture-explorer .rag-component:hover { transform: translateY(-3px); box-shadow: 0 14px 30px rgba(15,23,42,0.12); }
    .architecture-explorer .rag-component.selected { box-shadow: 0 0 0 3px rgba(59,130,246,0.6), 0 18px 32px rgba(59,130,246,0.25); transform: translateY(-4px); }
    .architecture-explorer .rag-component.highlight { background: #2563eb; color: #ffffff; box-shadow: 0 0 0 3px rgba(37,99,235,0.4), 0 18px 40px rgba(37,99,235,0.35); border-color: rgba(37,99,235,0.5); }
    .architecture-explorer .rag-component small { display: block; font-weight: 500; margin-top: 0.35rem; opacity: 0.75; }
    .architecture-explorer .rag-component-neutral { background: #f1f5f9; border-color: rgba(148,163,184,0.45); color: #1f2937; }
    .architecture-explorer .rag-subtier { border: 1.6px solid rgba(148,163,184,0.35); border-radius: 1rem; padding: 1.25rem 1.5rem; background: rgba(248,250,252,0.85); }
    .architecture-explorer .rag-subtier-title { text-transform: uppercase; letter-spacing: 0.08em; font-size: 0.75rem; text-align: center; margin-bottom: 1rem; color: #64748b; font-weight: 600; }
    .architecture-explorer .rag-nav a { display: block; padding: 0.65rem 0.85rem; border-radius: 0.75rem; color: #334155; font-size: 0.92rem; font-weight: 500; transition: background-color .2s ease, color .2s ease, transform .2s ease; }
    .architecture-explorer .rag-nav a:hover { background: rgba(59,130,246,0.08); color: #1d4ed8; transform: translateX(4px); }
    .architecture-explorer .rag-nav a.active { background: rgba(59,130,246,0.12); color: #1d4ed8; font-weight: 600; box-shadow: inset 0 0 0 1px rgba(59,130,246,0.2); }
    .architecture-explorer .rag-info-panel { background: rgba(248,250,252,0.92); border-radius: 1.5rem; box-shadow: 0 18px 40px rgba(15,23,42,0.16); border: 1px solid rgba(148,163,184,0.25); }
    .architecture-explorer .rag-tip { background: rgba(37,99,235,0.08); border-left: 4px solid rgba(37,99,235,0.45); border-radius: 0 1rem 1rem 0; }
    .architecture-explorer .rag-simulate-btn { box-shadow: 0 18px 35px rgba(37,99,235,0.25); }
    .architecture-explorer .rag-simulate-btn.stop { box-shadow: 0 18px 35px rgba(220,38,38,0.25); }
    .architecture-explorer .client-app { background: #dceffb; border-color: #a6cde4; }
    .architecture-explorer .dev-ops { background: #ffe0b2; border-color: #e6b980; }
    .architecture-explorer .gateway { background: #c8e6c9; border-color: #97c299; }
    .architecture-explorer .cache { background: #fffde7; border-color: #e6e4b3; }
    .architecture-explorer .orchestrator { background: #fff3e0; border-color: #e6d3b0; }
    .architecture-explorer .vector-store { background: #f3e5f5; border-color: #d3bde0; }
    .architecture-explorer .llm { background: #e1f5fe; border-color: #b0d9e6; }
    .architecture-explorer .embedding { background: #e0f7fa; border-color: #b0dfe6; }
    .architecture-explorer .parser { background: #e6ee9c; border-color: #c2cc70; }
    .architecture-explorer .rag-tier .rag-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 1.25rem; }
    .architecture-explorer .rag-tier .rag-grid-justify-between { justify-content: space-between; }
    .architecture-explorer .rag-tier .rag-grid-col { display: flex; flex-direction: column; gap: 0.75rem; align-items: center; }
    :root[data-theme="dark"] .architecture-explorer .rag-tier { background: rgba(15,23,42,0.55); border-color: rgba(148,163,184,0.45); }
    :root[data-theme="dark"] .architecture-explorer .rag-tier-title { color: #cbd5f5; }
    :root[data-theme="dark"] .architecture-explorer .rag-component { background: rgba(15,23,42,0.7); color: #e2e8f0; border-color: rgba(148,163,184,0.35); box-shadow: 0 8px 18px rgba(15,23,42,0.4); }
    :root[data-theme="dark"] .architecture-explorer .rag-component.highlight { color: #ffffff; }
    :root[data-theme="dark"] .architecture-explorer .rag-component-neutral { background: rgba(30,41,59,0.7); border-color: rgba(148,163,184,0.45); color: #e2e8f0; }
    :root[data-theme="dark"] .architecture-explorer .rag-subtier { background: rgba(30,41,59,0.65); border-color: rgba(148,163,184,0.35); }
    :root[data-theme="dark"] .architecture-explorer .rag-subtier-title { color: #a5b4fc; }
    :root[data-theme="dark"] .architecture-explorer .rag-nav a { color: #cbd5f5; }
    :root[data-theme="dark"] .architecture-explorer .rag-nav a:hover { background: rgba(59,130,246,0.18); color: #93c5fd; }
    :root[data-theme="dark"] .architecture-explorer .rag-nav a.active { background: rgba(59,130,246,0.25); color: #bfdbfe; }
    :root[data-theme="dark"] .architecture-explorer .rag-info-panel { background: rgba(15,23,42,0.75); border-color: rgba(148,163,184,0.35); box-shadow: 0 22px 45px rgba(8,10,26,0.65); }
    :root[data-theme="dark"] .architecture-explorer .rag-tip { background: rgba(37,99,235,0.2); border-left-color: rgba(96,165,250,0.6); }
    @media (min-width: 1024px) {
      .architecture-explorer .rag-tier .rag-grid { justify-content: space-evenly; }
      .architecture-explorer .rag-tier .rag-grid-justify-between { justify-content: space-around; }
    }

    #themeToggle.active { color: var(--accent); border-color: color-mix(in oklab, var(--accent) 40%, transparent); }
  </style>
</head>
<body class="antialiased leading-relaxed">
  <canvas id="bg-stars" aria-hidden="true"></canvas>
  <div class="progress" aria-hidden="true"></div>
  <div class="cursor" aria-hidden="true"></div>

  <nav class="topbar">
    <div class="container-max mx-auto px-6 pt-4">
      <div class="bar rounded-2xl px-5 py-3 flex items-center justify-between">
        <a href="#top" class="brand inline-flex items-center gap-3" aria-label="Ollama · Llama 3.1 가이드 홈">
          <svg class="wordmark h-7 sm:h-8" viewBox="0 0 260 40" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ollama Llama Guide">
            <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
            <defs>
              <linearGradient id="brandGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="var(--accent)"/>
                <stop offset="100%" stop-color="var(--accent-2)"/>
              </linearGradient>
              <filter id="softGlow" x="-20%" y="-50%" width="140%" height="200%" color-interpolation-filters="sRGB">
                <feGaussianBlur stdDeviation="1.2" result="blur"/>
                <feMerge>
                  <feMergeNode in="blur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <text x="16" y="27" font-size="22" font-weight="800" font-family="'Noto Sans KR','Malgun Gothic','Inter',system-ui,sans-serif" fill="url(#brandGrad)" filter="url(#softGlow)">Ollama · Llama 가이드</text>
          </svg>
          <svg width="36" height="36" viewBox="0 0 64 64" role="img" aria-hidden="true">
            <title>Ollama·PyTorch·KorBERT·ChromaDB 통합 RAG 구축 가이드</title>
            <defs>
              <linearGradient id="gOO" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" style="stop-color: var(--accent)"/>
                <stop offset="100%" style="stop-color: var(--accent-2)"/>
              </linearGradient>
            </defs>
            <circle cx="24" cy="32" r="14" fill="none" stroke="url(#gOO)" stroke-width="4" opacity="0.95" />
            <circle cx="40" cy="32" r="14" fill="none" stroke="url(#gOO)" stroke-width="4" opacity="0.6" />
            <ellipse cx="32" cy="28" rx="26" ry="12" fill="none" stroke="url(#gOO)" stroke-width="1.6" opacity="0.55" />
            <circle cx="46" cy="22" r="2.5" fill="url(#gOO)" />
          </svg>
          <span class="hidden sm:inline text-sm font-semibold text-soft">Windows 10 내부 임베딩 구축</span>
        </a>
        <div class="hidden lg:flex items-center gap-2 text-muted text-sm font-medium">
          <a href="#overview" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">개요</a>
          <a href="#setup" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">Ollama 설치</a>
          <a href="#llama" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">Llama 3.1</a>
          <a href="#pipeline" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">임베딩 파이프라인</a>
          <a href="#optimization" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">최적화</a>
          <a href="#troubleshooting" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">문제 해결</a>
          <a href="#cases" class="rounded-full px-4 py-2 border border-white/20 hover:bg-white/5 transition">적용 사례</a>
        </div>
        <div class="flex items-center gap-2">
          <button id="themeToggle" class="rounded-full px-3.5 py-2 text-sm font-semibold border border-white/20 hover:bg-white/5 transition text-muted" aria-label="별 수 증가 토글" title="별 밀도 1.5배 토글">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 3l1.6 3.8L17 8.5l-3.4 1.7L12 14l-1.6-3.8L7 8.5l3.4-1.7L12 3Z" fill="currentColor"/>
              <path d="M5 16l.9 2.2L8 19l-2.1 1L5 22l-.9-2L2 19l2.1-.8L5 16Z" fill="currentColor" opacity=".7"/>
              <path d="M19 15l1.2 2.7L23 19l-2.8 1.3L19 23l-1.2-2.7L15 19l2.8-1.3L19 15Z" fill="currentColor" opacity=".7"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <header id="top" class="relative">
    <div class="container-max mx-auto px-6 pt-12 pb-8 sm:pt-20 sm:pb-14 lg:pt-24">
      <div class="hero-gradient rounded-3xl p-8 sm:p-12 lg:p-16">
        <div class="flex flex-col items-center text-center gap-6">
          <span class="inline-flex items-center gap-2 text-sm text-muted">
            Windows 10 · 온프레미스 RAG · 엔터프라이즈 AI 오케스트레이션
          </span>
          <h1 class="text-4xl sm:text-6xl font-extrabold tracking-tight">
            <span class="block">Ollama · Llama 3.1 · PyTorch · KorBERT · ChromaDB · Tree-Sitter · LlamaIndex · FastAPI</span>
            <span class="block text-2xl sm:text-3xl mt-2 text-soft">Redis/memcached 캐싱 · Celery &amp; RabbitMQ/Redis · Prometheus &amp; Grafana 모니터링 · DVC 기반 데이터/모델 버전 관리</span>
          </h1>
          <p class="type-cycle text-base sm:text-lg text-muted">
            <span class="cycle-item active">온프레미스 LLM + KorBERT 하이브리드 RAG 아키텍처</span>
            <span class="cycle-item hidden">Tree-Sitter 문서 파싱과 ChromaDB 임베딩 동기화</span>
            <span class="cycle-item hidden">LlamaIndex + FastAPI 실시간 질의 파이프라인</span>
            <span class="cycle-item hidden">Celery 워커와 Redis 캐시 최적화 전략</span>
            <span class="cycle-item hidden">Prometheus·Grafana·DVC 기반 운영 거버넌스</span>
          </p>
          <div class="flex flex-wrap items-center justify-center gap-3 sm:gap-4 mt-2">
            <a href="#pipeline" class="magnetic rounded-full px-5 py-3 text-sm font-semibold text-black bg-white hover:opacity-90 transition">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="opacity-80"><path d="M4 8l8 5 8-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
              파이프라인 바로 보기
            </a>
            <a href="mailto:younseok.oh@gmail.com" class="rounded-full px-5 py-3 text-sm font-semibold border border-white/20 hover:bg-white/5 transition text-fg">전문가 상담 문의</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="overview" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
        <div class="shine" aria-hidden="true"></div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-4">프로젝트 개요</h2>
        <p class="text-soft leading-7">
          Windows 10 또는 WSL2 환경에서 Ollama로 Llama 3.1을 구동하고, PyTorch 기반 KorBERT 임베딩을 학습하며, Tree-Sitter로 사내 코드·문서를 정규화해 ChromaDB에 적재하는 온프레미스 RAG 아키텍처를 설계합니다. LlamaIndex와 FastAPI가 검색과 추론을 조합해 실시간 응답 품질을 보장하고, 데이터셋과 모델 전파는 DVC로 추적합니다.
        </p>
        <p class="text-soft leading-7 mt-4">
          본 가이드는 환경 준비, 모델·임베딩 학습, 비동기 파이프라인, API 연동, 관제·운영까지 한 번에 정리합니다. Redis/memcached 캐시, Celery 워커 + RabbitMQ/Redis 브로커, Prometheus·Grafana 모니터링을 활용해 안정적인 서비스 운영과 반복 가능한 배포 전략을 제시합니다.
        </p>
      </div>
    </section>

    <section id="toc" class="container-max mx-auto px-6 py-6 sm:py-10 lg:py-12">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">로드맵</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">구축 여정 한눈에 보기</h2>
        <div class="grid md:grid-cols-2 gap-6 text-soft">
          <ul class="space-y-3 list-none pl-0">
            <li class="flex gap-3"><span class="text-accent text-xl">01</span><span>Windows 10/WSL2, GPU 드라이버, Python·Poetry 개발 환경 및 필수 CLI 점검</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">02</span><span>Ollama 설치와 Llama 3.1 풀링, KorBERT 가중치 다운로드 및 PyTorch 런타임 구성</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">03</span><span>Tree-Sitter 파서 구축, 사내 문서·코드 정제, DVC 기반 데이터셋 버전 관리</span></li>
          </ul>
          <ul class="space-y-3 list-none pl-0">
            <li class="flex gap-3"><span class="text-accent text-xl">04</span><span>ChromaDB 인덱스 설계와 LlamaIndex 그래프 구성, FastAPI 게이트웨이 연동</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">05</span><span>Celery 워커 풀 및 RabbitMQ/Redis 브로커 구성, Redis/memcached 캐시 정책 수립</span></li>
            <li class="flex gap-3"><span class="text-accent text-xl">06</span><span>Prometheus &amp; Grafana APM, 모델·데이터 모니터링, 배포 자동화와 운영 KPI 정립</span></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- New Korean-friendly fonts and enhanced architecture section -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <section id="architecture" class="container-max mx-auto px-6 py-10 sm:py-16 lg:py-20">
      <div class="architecture-explorer rounded-3xl border border-white/10 text-slate-900 shadow-2xl dark:text-slate-100 min-h-screen overflow-hidden">
        <div class="px-6 sm:px-10 pt-8 pb-6">
          <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6">
            <div class="max-w-2xl">
              <p class="text-sm uppercase tracking-[0.32em] text-slate-500 dark:text-slate-400 mb-2 font-semibold">섹션 2.5</p>
              <h2 class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">통합 아키텍처 다이어그램</h2>
              <p class="mt-4 text-base sm:text-lg leading-7 text-slate-600 dark:text-slate-300 font-medium" style="font-family: 'Noto Sans KR', sans-serif;">Windows 10 · WSL2 기반 온프레미스 환경에서 Ollama, KorBERT, ChromaDB, LlamaIndex, FastAPI, Celery, Redis, RabbitMQ, Prometheus, Grafana, DVC가 상호작용하며 RAG 서비스를 제공하는 전체 구조를 혁신적인 인터랙티브 다이어그램으로 재설계했습니다.</p>
            </div>
            <div class="text-sm text-slate-500 dark:text-slate-400 leading-6 space-y-2 font-semibold">
              <p class="flex items-center"><span class="inline-block w-4 h-4 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 mr-2 animate-pulse"></span>실시간 서비스 경로</p>
              <p class="flex items-center"><span class="inline-block w-4 h-4 rounded-full bg-gradient-to-r from-emerald-400 to-green-500 mr-2 animate-pulse"></span>데이터 · 임베딩 파이프라인</p>
              <p class="flex items-center"><span class="inline-block w-4 h-4 rounded-full bg-gradient-to-r from-indigo-400 to-purple-500 mr-2 animate-pulse"></span>관측 & 거버넌스</p>
            </div>
          </div>
        </div>
        <div class="px-6 sm:px-10 pb-10 space-y-8">
          <div class="flex justify-center">
            <button id="simulate-btn" class="rag-simulate-btn bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-3 px-8 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">🚀 데이터 흐름 시뮬레이션 시작</button>
          </div>
          <div class="flex flex-col gap-8 xl:flex xl:flex-row xl:items-start xl:gap-10">
            <aside class="rag-nav bg-white/90 dark:bg-slate-800/80 border border-slate-200/60 dark:border-slate-700/70 rounded-2xl shadow-lg backdrop-blur-sm p-5 sticky top-6 transform transition-all duration-300 hover:shadow-xl xl:flex-shrink-0" style="width: 250px;">
              <h3 class="text-lg font-bold text-slate-700 dark:text-slate-100 mb-4 border-b border-slate-200/70 dark:border-slate-700/70 pb-2 flex items-center"><span class="text-2xl mr-2">📋</span>구성 요소 탐색</h3>
              <nav id="component-nav" class="space-y-1"></nav>
            </aside>
            <div class="flex-1 flex flex-col gap-6">
              <div id="diagram-root">
                <svg id="architecture-svg" class="w-full h-full" viewBox="0 0 1200 800" style="min-height: 650px;" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <filter id="glow">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge>
                      <feMergeNode in="coloredBlur"/>
                      <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                  </filter>
                  <linearGradient id="flowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#3b82f6"/>
                    <stop offset="100%" style="stop-color:#8b5cf6"/>
                  </linearGradient>
                </defs>

                <!-- Flow arrows -->
                <path id="flow-path-1" d="M 350 200 Q 400 230 550 260" stroke="url(#flowGradient)" stroke-width="3" fill="none" opacity="0" marker-end="url(#arrowhead)" class="flow-arrow"/>
                <path id="flow-path-2" d="M 550 260 Q 600 290 700 320" stroke="url(#flowGradient)" stroke-width="3" fill="none" opacity="0" marker-end="url(#arrowhead)" class="flow-arrow"/>
                <path id="flow-path-3" d="M 700 320 Q 800 380 900 400" stroke="url(#flowGradient)" stroke-width="3" fill="none" opacity="0" marker-end="url(#arrowhead)" class="flow-arrow"/>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
                </marker>

                <!-- Tiers -->
                <rect x="200" y="150" width="800" height="100" rx="15" fill="rgba(59, 130, 246, 0.1)" stroke="rgba(59, 130, 246, 0.3)" stroke-width="2"/>
                <rect x="200" y="300" width="800" height="200" rx="15" fill="rgba(16, 185, 129, 0.1)" stroke="rgba(16, 185, 129, 0.3)" stroke-width="2"/>
                <rect x="200" y="550" width="800" height="150" rx="15" fill="rgba(139, 92, 246, 0.1)" stroke="rgba(139, 92, 246, 0.3)" stroke-width="2"/>

                <!-- Components -->
                <g class="rag-component" data-id="A">
                  <rect x="250" y="170" width="120" height="60" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" class="component-rect" style="filter: url(#glow);"/>
                  <text x="310" y="195" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 12px; font-weight: 600; fill: #1e40af;">Web App</text>
                  <text x="310" y="210" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 10px; fill: #64748b;">(사용자)</text>
                </g>
                <g class="rag-component" data-id="C">
                  <rect x="400" y="170" width="140" height="60" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" class="component-rect"/>
                  <text x="470" y="190" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #92400e;">개발 운영자</text>
                  <text x="470" y="205" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 10px; fill: #a16207;">(소스 질의)</text>
                </g>

                <g class="rag-component" data-id="B">
                  <rect x="350" y="330" width="140" height="40" rx="8" fill="#c7f0dd" stroke="#065f46" stroke-width="2" class="component-rect"/>
                  <text x="420" y="350" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #065f46;">FastAPI RAG Gateway</text>
                </g>
                <g class="rag-component" data-id="D">
                  <rect x="300" y="390" width="120" height="40" rx="8" fill="#fef7ed" stroke="#ea580c" stroke-width="2" class="component-rect"/>
                  <text x="360" y="410" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #9a3412;">Redis Cache</text>
                </g>
                <g class="rag-component" data-id="E">
                  <rect x="500" y="390" width="140" height="40" rx="8" fill="#fef0f5" stroke="#be185d" stroke-width="2" class="component-rect"/>
                  <text x="570" y="410" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #be185d;">LlamaIndex Orchestrator</text>
                </g>

                <rect x="300" y="450" width="400" height="80" rx="10" fill="rgba(0,0,0,0.05)" stroke="rgba(0,0,0,0.2)" stroke-width="1"/>
                <text x="500" y="470" text-anchor="middle" class="tier-label" style="font-family: 'Noto Sans KR', sans-serif; font-size: 12px; font-weight: 700; fill: #374151;">Core RAG Pipeline</text>
                <g class="rag-component" data-id="F">
                  <rect x="320" y="480" width="130" height="40" rx="8" fill="#f3e8ff" stroke="#7c3aed" stroke-width="2" class="component-rect"/>
                  <text x="385" y="500" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #7c3aed;">ChromaDB Vector Store</text>
                </g>
                <g class="rag-component" data-id="G">
                  <rect x="530" y="480" width="140" height="40" rx="8" fill="#dbeafe" stroke="#2563eb" stroke-width="2" class="component-rect"/>
                  <text x="600" y="500" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #1d4ed8;">Ollama · Llama 3.1</text>
                </g>

                <g class="rag-component" data-id="J">
                  <rect x="250" y="570" width="140" height="40" rx="8" fill="rgba(148,163,184,0.2)" stroke="rgba(148,163,184,0.5)" stroke-width="2" class="component-rect"/>
                  <text x="320" y="590" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 600; fill: #475569;">원본 데이터 리포지토리</text>
                </g>
                <g class="rag-component" data-id="H1">
                  <rect x="250" y="620" width="120" height="40" rx="8" fill="rgba(148,163,184,0.2)" stroke="rgba(148,163,184,0.5)" stroke-width="2" class="component-rect"/>
                  <text x="310" y="640" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 10px; font-weight: 600; fill: #475569;">매뉴얼 / 코드 원본</text>
                </g>

                <rect x="500" y="570" width="250" height="90" rx="10" fill="rgba(0,0,0,0.05)" stroke="rgba(0,0,0,0.2)" stroke-width="1"/>
                <text x="625" y="585" text-anchor="middle" class="tier-label" style="font-family: 'Noto Sans KR', sans-serif; font-size: 11px; font-weight: 700; fill: #374151;">Embedding Process · Celery Task</text>
                <g class="rag-component" data-id="H2">
                  <rect x="520" y="600" width="110" height="35" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="2" class="component-rect"/>
                  <text x="575" y="620" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 10px; font-weight: 600; fill: #166534;">Tree-Sitter / Parser</text>
                </g>
                <g class="rag-component" data-id="I">
                  <rect x="640" y="600" width="120" height="35" rx="8" fill="#fdf4ff" stroke="#c026d3" stroke-width="2" class="component-rect"/>
                  <text x="700" y="620" text-anchor="middle" class="component-text" style="font-family: 'Noto Sans KR', sans-serif; font-size: 10px; font-weight: 600; fill: #831843;">KorBERT Embedding</text>
                </g>

                <!-- Tier labels -->
                <text x="600" y="135" text-anchor="middle" class="tier-title" style="font-family: 'Noto Sans KR', sans-serif; font-size: 18px; font-weight: 800; fill: #1e40af;">Client Application · 전자정부프레임워크 / WebLogic</text>
                <text x="600" y="285" text-anchor="middle" class="tier-title" style="font-family: 'Noto Sans KR', sans-serif; font-size: 18px; font-weight: 800; fill: #065f46;">RAG System · Python Runtime</text>
                <text x="600" y="535" text-anchor="middle" class="tier-title" style="font-family: 'Noto Sans KR', sans-serif; font-size: 18px; font-weight: 800; fill: #5b21b6;">Data Management & Preprocessing</text>
              </svg>
            </div>
            <aside class="rag-info-panel p-4 xl:p-5 bg-white/90 dark:bg-slate-800/80 border border-slate-200/60 dark:border-slate-700/70 rounded-2xl shadow-lg backdrop-blur-sm transform transition-all duration-300 hover:shadow-xl max-h-60 overflow-auto" id="info-panel">
              <h3 id="info-title" class="text-lg font-bold text-slate-800 dark:text-white mb-3 flex items-center"><span class="text-xl mr-2">🔍</span>아키텍처 상세 정보</h3>
              <div id="info-content" class="text-slate-700 dark:text-slate-200 space-y-3 text-sm" style="font-family: 'Noto Sans KR', sans-serif;">
                <p>이 대화형 아키텍처 다이어그램은 AI 헬퍼 시스템의 모든 구성 요소를 시각적으로 표현합니다. 각 블록을 클릭하여 세부 역할과 기술 스택을 확인하세요.</p>
                <p class="font-semibold">시뮬레이션 모드로 데이터 흐름을 따라가며 시스템 작동 원리를 체험해보시거나, 구성 요소 탐색 메뉴에서 관심 있는 부분을 선택하세요.</p>
                <div class="rag-tip mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg">
                  <h4 class="font-bold text-blue-800 dark:text-blue-200 flex items-center"><span class="text-sm mr-2">💡</span>사용 팁</h4>
                  <p class="text-xs text-blue-700 dark:text-blue-100 mt-1 font-medium">‘데이터 흐름 시뮬레이션’ 버튼을 클릭하면 애니메이션으로 사용자 요청이 시스템을 통과하는 과정을 확인할 수 있습니다.</p>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </div>
    </section>
            
    <section id="setup" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <p>섹션 2.5 아키텍처 다이어그램을 요구사항대로 수정했습니다. 왼쪽에 구성 요소 탐색 메뉴 유지, 가운데 다이어그램 크게, 오른쪽 아래에 보조 설명 패널 작게. 섹션을 투명으로 만들어 밤하늘 별 바탕 보이도록 하고 전반적인 가독성을 높입니다. 별 배경이 아름답네.</p>
        </div>
      </div>
    </section>
    <section id="setup" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="grid lg:grid-cols-[1.1fr,0.9fr] gap-10 items-start">
        <article class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
          <div class="shine" aria-hidden="true"></div>
          <p class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 2</p>
          <h2 class="text-2xl sm:text-3xl font-bold mb-6">설치 및 환경 준비</h2>
          <ol class="space-y-6 text-soft">
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">기본 OS · GPU · Python 설정</h3>
              <p>Windows 10 22H2 이상 또는 동일 수준의 WSL2 배포판에서 Hyper-V/가상화와 WSL2 기능을 활성화합니다. NVIDIA GPU 사용 시 최신 스튜디오 드라이버와 CUDA 12.x, cuDNN을 설치하고, Python 3.10+와 Poetry(또는 pipx)로 프로젝트 전용 가상환경을 구성합니다.</p>
            </li>
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">Ollama · PyTorch · KorBERT 스택 구성</h3>
              <p>관리자 PowerShell에서 Ollama를 설치한 뒤 <code>ollama pull llama3.1:8b</code>로 베이스 모델을 내려받습니다. PyTorch는 GPU 사양에 맞는 휠을 설치하고, KorBERT 프리트레인 가중치를 다운로드해 <code>torchrun</code> 기반 파인튜닝 스크립트와 DVC 데이터 리모트를 연동합니다.</p>
            </li>
            <li>
              <h3 class="text-lg font-semibold text-fg mb-2">브로커 · 캐시 · 모니터링 배치</h3>
              <p>Celery 워커가 사용할 RabbitMQ 또는 Redis 브로커를 설치해 접근 계정과 vhost를 분리하고, Redis/memcached 캐시 서버를 구성해 세션·임베딩 데이터를 저장합니다. Prometheus 노드 익스포터와 Grafana를 함께 설치해 추론 메트릭과 시스템 지표를 수집합니다.</p>
            </li>
          </ol>
        </article>
        <aside class="glass rounded-2xl p-6 sm:p-8 space-y-5">
          <h3 class="text-xl font-semibold text-fg">빠른 체크리스트</h3>
          <ul class="space-y-3 text-soft text-sm">
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Windows Update, WSL2, 가상화(VT-x/AMD-V) 활성화 완료</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>CUDA/ROCm 및 GPU 드라이버 설치, <code>nvidia-smi</code> 정상 응답</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Python 3.10+, Poetry/pipx, 필수 패키지(<code>torch</code>, <code>dvc</code>, <code>llama-index</code>) 설치</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>Redis 또는 memcached 캐시 서비스 포트 및 보안 설정</span></li>
            <li class="flex items-start gap-3"><span class="mt-1 text-accent">✔</span><span>RabbitMQ/Redis 브로커 사용자 권한, Prometheus 익스포터 배포</span></li>
          </ul>
        </aside>
      </div>
    </section>

    <section id="llama" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 tilt-card relative">
        <div class="shine" aria-hidden="true"></div>
        <p class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 3</p>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">설치 및 초기 설정</h2>
        <div class="grid md:grid-cols-3 gap-8 text-soft">
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">1. Ollama &amp; Llama 3.1 런타임</h3>
            <p><code>ollama serve</code>로 백그라운드 서비스를 기동하고, <code>ollama pull llama3.1:8b</code> 또는 사내 정책에 맞는 모델을 다운로드합니다. <code>OLLAMA_HOST</code>를 FastAPI 게이트웨이에서 접근 가능한 주소로 노출하고, <code>--keepalive</code> 설정으로 초기 응답 지연을 줄입니다.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">2. KorBERT 임베딩 · PyTorch 파이프라인</h3>
            <p>KorBERT 파인튜닝 스크립트를 PyTorch Lightning/Accelerate로 실행하고, Tree-Sitter가 생성한 청크 데이터를 DVC 스테이지로 관리합니다. 학습된 체크포인트는 <code>torch.jit</code> 또는 safetensors 형식으로 내보내 Celery 임베딩 워커에서 즉시 로드합니다.</p>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-fg mb-2">3. LlamaIndex · FastAPI · ChromaDB 연계</h3>
            <p>LlamaIndex 노드 그래프를 ChromaDB 벡터스토어와 KorBERT 임베딩에 연결하여 검색 정확도를 확보합니다. FastAPI에서는 의존성 주입 패턴으로 쿼리 엔진을 구성하고, Redis 캐시 키를 활용해 자주 조회되는 질의를 재사용하며 Celery 태스크로 배치 업데이트를 예약합니다.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="pipeline" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 4</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">내부 임베딩 파이프라인</h2>
        <div class="grid lg:grid-cols-2 gap-8">
          <div class="space-y-5 text-soft leading-7">
            <p><strong class="text-fg">문서 파싱 &amp; 임베딩 학습</strong> Tree-Sitter 파서를 통해 코드·문서를 토큰 단위로 정규화하고 KorBERT 토크나이저로 512 토큰 청크를 생성합니다. 생성된 데이터셋은 DVC 파이프라인 스테이지에 등록되어 버전별로 재현 가능한 PyTorch 학습을 보장합니다.</p>
            <p><strong class="text-fg">벡터 스토어 &amp; 쿼리 그래프</strong> KorBERT 임베딩 벡터는 ChromaDB 컬렉션에 저장하고, HNSW/IVF 파라미터를 업무 도메인에 맞춰 튜닝합니다. LlamaIndex는 KorBERT 벡터를 1차 검색으로, Ollama Llama 3.1을 생성 모델로 조합해 컨텍스트 기반 답변을 제공합니다.</p>
            <p><strong class="text-fg">비동기 파이프라인 &amp; 버전 관리</strong> Celery 워커는 Tree-Sitter 결과와 KorBERT 임베딩을 배치로 재생성하고, Redis/memcached 캐시는 자주 조회되는 질의를 저장합니다. 모든 데이터 변경 이력과 모델 체크포인트는 DVC 및 Git 태그로 관리해 배포와 롤백을 단순화합니다.</p>
          </div>
          <div class="glass rounded-2xl p-6 space-y-5">
            <h3 class="text-xl font-semibold text-fg">샘플 구성</h3>
            <div class="space-y-3 text-sm text-soft">
              <div>
                <div class="font-semibold text-fg mb-1">DVC 파이프라인</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>dvc stage add -n parse \
  -d data/raw -d scripts/tree_sitter.py \
  -o data/parsed
python scripts/tree_sitter.py</code></pre>
              </div>
              <div>
                <div class="font-semibold text-fg mb-1">Celery 임베딩 태스크</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>@celery.task(bind=True, retry_backoff=True)
def build_embedding(self, doc_id):
    text = fetch_document(doc_id)
    emb = korbert_encoder.encode(text)
    chroma.upsert(doc_id, emb)</code></pre>
              </div>
              <div>
                <div class="font-semibold text-fg mb-1">FastAPI + LlamaIndex</div>
                <pre class="bg-black/30 rounded-xl p-4 overflow-x-auto"><code>@app.post(&quot;/query&quot;)
async def query(payload: Query):
    cached = redis.get(payload.key)
    if cached:
        return cached
    answer = index.as_query_engine().query(payload.text)
    redis.setex(payload.key, 300, answer)
    return answer</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="optimization" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 5</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-8">성능 최적화 &amp; 운영 전략</h2>
        <div class="grid lg:grid-cols-2 gap-8 text-soft leading-7">
          <div class="space-y-5">
            <p><strong class="text-fg">성능 관측 &amp; 프로파일링</strong> Ollama, FastAPI, Celery, ChromaDB 인스턴스에 Prometheus 익스포터를 부착해 지연, 처리량, GPU 메모리, 큐 적체를 수집합니다. Grafana에서는 워크로드별 대시보드를 만들고 Alertmanager로 임계치 기반 알람을 설정합니다.</p>
            <p><strong class="text-fg">캐시 &amp; 세션 전략</strong> Redis/memcached는 질의 결과, 모델 메타데이터, 세션 토큰을 분리된 네임스페이스로 저장합니다. TTL, 버전 키, Bloom Filter를 활용해 캐시 오염을 방지하고, FastAPI 미들웨어에서 히트율을 측정해 정책을 고도화합니다.</p>
          </div>
          <div class="space-y-5">
            <p><strong class="text-fg">비동기 태스크 튜닝</strong> Celery 워커는 GPU/CPU 리소스에 맞춰 <code>--concurrency</code>와 <code>--prefetch-multiplier</code>를 조정하며, RabbitMQ/Redis 브로커의 QoS 설정으로 대기열 폭발을 방지합니다. 예약 태스크는 Beat 또는 Airflow 트리거와 연계해 야간 일괄 업데이트를 수행합니다.</p>
            <p><strong class="text-fg">모델 최적화 &amp; 배포</strong> KorBERT 임베딩 모델은 8-bit/FP16 혼합 정밀도와 TorchScript로 경량화하고, Llama 3.1은 Ollama <code>quantize</code> 옵션이나 GPU 샤딩으로 확장합니다. DVC 스테이지를 통해 학습→검증→배포를 자동화하고, Canary/Blue-Green 전략으로 서비스 중단 없이 롤아웃합니다.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="troubleshooting" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 6</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-8">문제 해결 및 주의사항</h2>
        <div class="grid md:grid-cols-3 gap-6">
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">🪟</div>
            <h3 class="text-lg font-semibold text-fg">사전 점검 미흡</h3>
            <p class="text-sm text-soft">Windows 버전이 낮거나 가상화가 비활성화되면 설치가 중단되고, 메모리·디스크 부족으로 모델 다운로드가 실패합니다. Windows 22H2 이상, BIOS/Hyper-V 가상화 활성화, 디스크 정리를 우선 수행하세요.</p>
          </article>
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">🧰</div>
            <h3 class="text-lg font-semibold text-fg">GPU·라이브러리 불일치</h3>
            <p class="text-sm text-soft">NVIDIA 드라이버와 CUDA 버전 불일치, <code>transformers</code> 패키지 구버전, 네트워크 끊김 등이 실행 오류를 유발합니다. <code>nvidia-smi</code>로 상태를 점검하고, CUDA·cuDNN·패키지를 최신으로 유지한 뒤 안정적인 네트워크 환경에서 재시도하세요.</p>
          </article>
          <article class="glass rounded-2xl p-6 text-center space-y-3">
            <div class="text-3xl" aria-hidden="true">⚠️</div>
            <h3 class="text-lg font-semibold text-fg">권한·운영 리스크</h3>
            <p class="text-sm text-soft">관리자 권한 부족, 모델 대비 시스템 자원 부족은 서비스 실패와 성능 저하를 유발합니다. 모든 설치·서비스 기동은 관리자 권한으로 수행하고, 작은 모델·양자화로 성능을 검증한 뒤 점진적으로 확장하세요.</p>
          </article>
        </div>
      </div>
    </section>

    <section id="cases" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10">
        <div class="text-sm uppercase tracking-[0.35em] text-muted mb-4">섹션 7</div>
        <h2 class="text-2xl sm:text-3xl font-bold mb-6">적용 시나리오</h2>
        <div class="grid lg:grid-cols-2 gap-8 items-start">
          <div class="space-y-5 text-soft leading-7">
            <p><strong class="text-fg">사내 지식 허브</strong> KorBERT + ChromaDB 조합으로 규정, 매뉴얼, 티켓 로그를 임베딩하여 직원용 Q&amp;A 포털을 구축합니다. FastAPI는 권한 기반 라우팅을 제공하고 Redis 캐시로 반복 질의를 가속해 평균 응답 시간을 1초 이하로 유지합니다.</p>
            <p><strong class="text-fg">코드 거버넌스 자동화</strong> Tree-Sitter로 서비스별 저장소를 파싱하고 Celery 워커가 KorBERT 임베딩을 생성해 보안 감사 용어집과 비교합니다. 비정상 패턴은 RabbitMQ 이벤트로 전송되어 LlamaIndex를 통한 자연어 요약 리포트로 전달됩니다.</p>
            <p><strong class="text-fg">운영/모니터링 통합</strong> Prometheus·Grafana로 추론 지연, 큐 적체, GPU 활용률을 감시하고, DVC 스테이지 메타데이터를 연결해 모델 릴리스별 성능 변화를 한눈에 추적합니다. Celery Beat가 야간에 데이터를 재인덱싱해 안정적인 서비스 품질을 유지합니다.</p>
          </div>
          <div class="glass rounded-2xl overflow-hidden">
            <img src="https://milvus.io/docs/v2.2.x/assets/architecture_diagram.png" alt="Milvus 벡터 데이터베이스 아키텍처" class="w-full h-full object-cover" />
          </div>
        </div>
      </div>
    </section>

    <section id="resources" class="container-max mx-auto px-6 py-10 sm:py-14 lg:py-16">
      <div class="glass rounded-2xl p-6 sm:p-10 text-center space-y-4">
        <h2 class="text-2xl sm:text-3xl font-bold">다음 단계</h2>
        <p class="text-soft leading-7">PoC를 끝냈다면, 모니터링 지표와 보안 요건을 정의하고 운영 자동화(배치 재임베딩, 지식 베이스 동기화)를 설계하세요. 필요한 경우 저희 컨설턴트가 Windows 10 기반의 로컬 AI 파이프라인 구축을 도와드립니다.</p>
        <a href="mailto:younseok.oh@gmail.com" class="magnetic inline-flex items-center gap-2 rounded-full px-6 py-3 text-sm font-semibold text-black bg-white hover:opacity-90 transition">전문 컨설턴트에게 문의하기</a>
      </div>
    </section>
  </main>

  <footer class="container-max mx-auto px-6 pb-12 text-center text-sm text-muted">
    &copy; 2025 OO Consulting · Windows 10 Ollama &amp; Llama 3.1 Guide.
  </footer>

  <button id="backToTop" aria-label="맨 위로" class="fixed bottom-5 right-5 rounded-full px-4 py-3 text-sm font-semibold text-black bg-white shadow-lg border border-white/20 opacity-0 pointer-events-none transition">Top</button>

  <script>
    const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
    const getCSSVar = (name) => getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    const hexToRgb = (hex) => {
      const h = hex.replace('#','').trim();
      if (/^[0-9a-fA-F]{3}$/.test(h)) {
        const r = parseInt(h[0]+h[0],16), g = parseInt(h[1]+h[1],16), b = parseInt(h[2]+h[2],16); return {r,g,b};
      }
      if (/^[0-9a-fA-F]{6}$/.test(h)) {
        return { r: parseInt(h.slice(0,2),16), g: parseInt(h.slice(2,4),16), b: parseInt(h.slice(4,6),16) };
      }
      return { r: 88, g: 196, b: 255 };
    };

    (function(){
      const btn = document.getElementById('themeToggle');
      window.starBoost = false;
      function ensureNight(){ document.documentElement.setAttribute('data-theme', 'dark'); try { localStorage.setItem('theme', 'dark'); } catch(e) {} }
      btn.addEventListener('click', () => {
        ensureNight();
        window.starBoost = !window.starBoost;
        btn.classList.toggle('active', window.starBoost);
        document.dispatchEvent(new CustomEvent('starboost', { detail: window.starBoost }));
      });
    })();

    (function() {
      const items = Array.from(document.querySelectorAll('.type-cycle .cycle-item'));
      if (!items.length) return;
      let i = 0; setInterval(() => { items.forEach(el => el.classList.add('hidden')); i = (i+1) % items.length; items[i].classList.remove('hidden'); }, 2200);
    })();

    (function(){
      const cursor = document.querySelector('.cursor');
      let x = 0, y = 0, tx = 0, ty = 0;
      function raf(){ x += (tx - x) * 0.18; y += (ty - y) * 0.18; cursor.style.transform = `translate(${x}px, ${y}px)`; requestAnimationFrame(raf); }
      window.addEventListener('pointermove', e => { tx = e.clientX; ty = e.clientY; }, { passive: true });
      raf();
      for (const m of document.querySelectorAll('.magnetic')){
        const strength = 18;
        m.addEventListener('pointermove', e => { const r = m.getBoundingClientRect(); const mx = e.clientX - r.left - r.width/2; const my = e.clientY - r.top - r.height/2; m.style.transform = `translate(${mx/strength}px, ${my/strength}px)`; cursor.classList.add('-lg'); });
        m.addEventListener('pointerleave', () => { m.style.transform = ''; cursor.classList.remove('-lg'); });
      }
    })();

    (function(){
      const cards = document.querySelectorAll('.tilt-card');
      cards.forEach(card => {
        const max = 8;
        card.addEventListener('pointermove', e => { const r = card.getBoundingClientRect(); const px = (e.clientX - r.left) / r.width; const py = (e.clientY - r.top) / r.height; const rx = (py - .5) * -max; const ry = (px - .5) * max; card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`; card.style.setProperty('--mx', `${px*100}%`); card.style.setProperty('--my', `${py*100}%`); });
        card.addEventListener('pointerleave', () => { card.style.transform = ''; });
      });
    })();

    (function(){
      const bar = document.querySelector('.progress');
      const btn = document.getElementById('backToTop');
      function onScroll(){ const s = window.scrollY; const h = document.body.scrollHeight - innerHeight; const p = clamp(h > 0 ? s/h : 0, 0, 1); bar.style.width = `${p*100}%`; if (s > innerHeight * 0.6) { btn.style.opacity = '1'; btn.style.pointerEvents = 'auto'; } else { btn.style.opacity = '0'; btn.style.pointerEvents = 'none'; } }
      window.addEventListener('scroll', onScroll, { passive: true }); onScroll();
      btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();

    window.addEventListener('load', () => {
      if (!window.gsap) return; const { gsap } = window; if (window.ScrollTrigger) gsap.registerPlugin(ScrollTrigger);
      gsap.from('header .hero-gradient', { y: 20, autoAlpha: 0, duration: 0.8, ease: 'power2.out' });
      gsap.utils.toArray('.tilt-card').forEach((el, i) => { gsap.from(el, { y: 30, autoAlpha: 0, duration: 0.7, ease: 'power2.out', delay: i*0.05, scrollTrigger: { trigger: el, start: 'top 85%' } }); });
    });

    document.addEventListener('DOMContentLoaded', () => {
      try {
        const el = document.querySelector('header h1 .block');
        if (!el) return;
        const raw = (el.textContent || '').trim();
        const open = raw.indexOf('(');
        const close = raw.indexOf(')');
        if (open === 0 && close > open) {
          const prefix = raw.slice(0, close + 1);
          const rest = raw.slice(close + 1);
          el.innerHTML = `<span style="font-size:0.5em; vertical-align:baseline;">${prefix}</span><span class="ml-1 align-baseline">${rest}</span>`;
        }
      } catch(e) {}
    });
  </script>
</body>
</html>
